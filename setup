#!/usr/bin/env python
# vim:ft=python
#
import os
import sys
import subprocess
from argparse import ArgumentParser

if sys.version < '3.5':
    print('requires python version >= 3.5')
    sys.exit(1)

root_dir = os.path.dirname(os.path.realpath(__file__))
default_path = os.path.join(root_dir, 'build')

def input_parser():
    parser = ArgumentParser()

    parser.add_argument('build_dir',
                         help="Build directory",
                         default=default_path,
                         action='store',
                         nargs='?')
    parser.add_argument('-clean', '--clean-dir',
                         help="Delete contents of build dir (if any) before running CMake",
                         action='store_true')

    return parser.parse_args()

def main(argv):
    print(argv)
    args = input_parser()
    
    build = os.path.abspath(args.build_dir)
    os.makedirs(build)

if __name__ == '__main__':
    main(sys.argv)
